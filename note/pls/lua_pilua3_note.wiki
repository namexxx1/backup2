%title 《Programming in Lua 3rd Edition》读书笔记

[[../../index|首页]] - [[../index|Notes]] - [[index|PLS]]
==《Programming in Lua 3rd Edition》读书笔记==
----
===命令行选项===

* `-i`：指定在进入交互模式之前先载入的文件，如 `lua -i init.lua`
* `-e`：直接在命令行书写程序代码，如 `lua -e "print('hello, world')"`
* `-l`：加载指定库文件，如 `lua -i -llib_name`

所有命令行参数全部自动赋值到 `arg` 表，`arg[0]` 总是指代所执行的脚本文件名
----
===基本语法===

语句结尾的分号可选

单行注释：`--`，多行注释：`--[[ 注释内容 ]]`，更常用的多行注释形式：`--[[ 注释内容 --]]`

所有所声明的变量默认都为全局变量，声明局部数据使用 `local`

表示多行字符串，方法一是 `''` 或 `""` 里面在行末使用 `\` 或 `\z`；方法二是使用 `[[ 内容 ]]` 的形式；方法三是使用 `[===[ 内容 ]===]`，其中等于号的个数自定，只要头尾个数一样就行

类似多行字符串，多行注释还有一种表示方法：`--[===[ 注释内容 ]===]`，同样只要头尾等于号个数一致就行

没有 `++`、`--`、`+=`、`-=` 等运算符
----
===数据类型和数据结构===

八种基本数据类型
* `nil`：可将变量赋值为 `nil` 来达到销毁变量的目的
* `boolean`：只有 `nil` 和 `false` 被视为假，这与 `Ruby` 的表现是一致的
* `number`：全部为双精度浮点数，没有整数类型
* `string`：字符串不可变，不可通过下标取单个字符，取长度用 `#` 前缀，连接两字符串使用 `..` 符号
* `userdata`
* `function`：与 `JavaScript` 中的函数类似，与其他数据一样可自由赋值和使用
* `thread`
* `table`：与 `PHP` 中的数组类似，就是一哈希表

`table` 主要特性：
* 数字下标习惯于从 `1` 开始，而不是 `C系` 语言的 `0`
* 键名为非数字以及非以数字开头的字符串时可使用 `.` 号表示法，如 `tab['x']` 可写作 `tab.x`，`tab['x10']` 可写作 `tab.x10`，`tab[10]` 和 `tab['10x']` 则不行
* 数字下标和字符串形式的数字下标是不同的，如 `tab[1]` 和 `tab['1']` 代表的是两个不同的元素
* 使用 `#` 前缀可取得以数值为下标的 `table`，其连续非空值的最后一个元素的下标值。如已有 `tab[1] = 'a'`、`tab[2] = 'b'`、`tab[10] = 'c'`，则 `#tab` 等于 `2`
----
===常用函数===

* `dofile`：加载并执行指定源文件
* `type`：检测给定参数的数据类型
* `tonumber`：将给定参数转换成数值
* `tostring`：将给定参数转换成字符串
----
<red>date</red> : 2014-03-12、2014-03-14、2014-03-17、2014-03-18
----
