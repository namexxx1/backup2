%title 正则表达式基础

[[../../index|首页]] - [[../index|Notes]] - [[index|CSBase]]
==正则表达式基础==
----
===重要原则===

# 细心，不要出现低级错误
# 逻辑严密，不要漏掉有可能出现的任何一种情况
# 测试用例要考虑到尽可能不一致的情况
# 要着重考虑数据的临界点

以下皆以 `PHP` 的 `PCRE` 正则引擎为准
----
===分隔符===

常用 `/xxx/` 的形式，但也可以自定义分隔符，只需前后一致或前后匹配即可，如 `!xxx!` 或者 `{xxx}`

如果正则表达式中存在太多和分隔符一样的字符，方法之一是改用其他分隔符，方法之二是使用函数 `preg_quote` 自动进行转义
----
===基本规则===

* 命名子组：`(?P<name>xxx)`、`(?<name>xxx)`、`(?'name'xxx)`
* 反向引用（绝对引用）：`\1`、`\g1`、`\g{1}`
* 反向引用（相对引用）：`\g-1`、`\g{-1}`
* 反向引用（命名引用）：`(?P=name)`、`\k<name>`、`\k'name'`、`\k{name}`、`\g{name}`
* 非捕获型分组：`(?:xxx)`
* 非捕获且多子组共用同一个反向引用数字（复制数字）：`(?|xxx)`
----
===特殊规则===

* 匹配反斜杠本身需要四个反斜杠：`\\\\`
* 可以在 `(?xxx)` 的 `?` 后面加模式修饰符，可用的有 `i`、`m`、`s`、`x` 等
----
===环视/断言===

一个断言就是一个对当前匹配位置之前或之后的字符的测试，不会实际消耗字符，`^`、`$`、`\b`、`\B` 就属于简单的断言

前瞻断言判断当前位置之后是否存在或不存在某模式，后瞻断言判断当前位置之前是否存在或不存在某模式

可以同时使用多个断言，可以嵌套，且对顺序没有要求

`PHP` 支持的语法如下：
* `(?=xxx)`：前瞻积极断言，判断后面是否存在某模式
* `(?!xxx)`：前瞻消极断言，判断后面是否不存在某模式
* `(?<=xxx)`：后瞻积极断言，判断前面是否存在某模式
* `(?<!xxx)`：后瞻消极断言，判断前面是否不存在某模式
----
<red>date</red> : 2014-04-30、2014-05-04
----
